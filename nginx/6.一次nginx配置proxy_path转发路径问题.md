#### 背景介绍

&emsp;最近后台新上了一个服务,需要用nginx做转发,而且和一般的转发不一样,比如,客户端请求的url为`http://test.com/trade/order`,经过nginx转发到后台必须为`/order`,意思是nginx正则匹配的是trade,但传到后台的时候就应该去掉trade;

正常情况下nginx的配置为:
```
location /trade/ 
{ 
proxy_pass http://127.0.0.1:6789; 
}
```
flask的配置为:
```
#!/usr/bin/env python
from flask import Flask

app = Flask(__name__)

@app.route('/order')
def hello():
    return 'Hello,Rocky!!!'

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=6789)

```
请求http://test.com/trade/order的时候,flask接收到的path为:
```
/trade/order
```

如果想要传给后台`/order`,有两种方法,那么nginx的配置为:

1. 
```
location /trade/
   {
     proxy_pass http://127.0.0.1:6789;
     }
```

2. 
```
location /trade/
   {
     rewrite /trade/(.+)$ /$1 break; #完成当前设置的重写规则，停止执行其他的重写规则。
     proxy_pass http://127.0.0.1:6789;
     }

```
