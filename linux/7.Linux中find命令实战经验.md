#### 背景介绍

&emsp;最近遇到这样一个坑, 使用删除日志的脚本不灵了, 手工试了一下, 原来`find`命令根据时间查找文件出了问题, 按照既定的规则找不到对应的文件, 这里深入明确地学习一下find的确切时间查找方法.

#### 使用方法

&emsp;如果我是在18日上午10:00执行下面的命令来查找2天前修改过的文件:

```
#find /logs -mtime +2 -type f
```

这样查找的结果是15日上午10:00以前修改过的文件,如下图所示:

![find](https://user-images.githubusercontent.com/7486508/30572384-de5b9944-9cb2-11e7-94e3-a8c9803db08c.jpeg)


#### 误删的问题

&emsp;在一下科技中, 转码服务遇到过这么一个问题, 视频转码会产生一些中间垃圾文件, 需要定期删除, 这些文件所在的目录中不仅仅有这些待删除的文件, 也有其它的目录, 而且目录中也有文件, 这个时候, 开始我写的删除命令为:

```bash
find /log -mtime +10 |xargs rm -f
```

我本来以为rm不加-r参数不会删除子目录中的文件, 结果子目录中的文件也是被删除了, 只是子目录本身没有删除, 这时候为了只是让find命令只搜索到`/log`目录下的文件, 我们有2个方法:

* 加上参数`-maxdepth 1`(推荐)

这个参数的意思是只是让find查找一级目录, 不用向再深的目录查找, 注意这个参数必须加在`-mtime`参数的前面

* 再查找的结果中过滤掉不想删除的结果

加入子目录的名称为`xxx`, 我们可以使用如下的删除命令:

```
find /log -mtime +10|grep -v xxx |xargs rm -f
```

