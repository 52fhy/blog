#### 背景介绍

&emsp;因为之前翻译的一本谷歌出版的运维图书而被阿里云的同事内推了,第一次电话面试中问了很多关于进程间通讯的问题,当时回答的并不是很好,于是利用整个国庆期间学习了这一块的知识,这一章是关于socket的方法.

#### socket模块常见用法

* getaddrinfo

```
socket.getaddrinfo(host, port[, family[, socktype[, proto[, flags]]]])
获取给定地址的详细信息
>>>import socket
>>>s = socket.getaddrinfo('jp.rockywu.me', 80, 2, 1, 6)
>>>print s
[(2, 1, 6, '', ('118.193.81.214', 80))]

2 指的是AF_INET Ipv4协议
1 指的是SOCK_STREAM tcp协议
6 指的是ROTO_TCP 一般配合1,表示TCP协议

```

* gethostname

```
获取Linux服务器名称hostname
>>> socket.gethostname()
'mmdev01'
>>>
```

* gethostbyname

```
获取主机的IP地址
>>> socket.gethostbyname(socket.gethostname())
'118.193.81.214'
```

* inet_pton

```
将点分十进制格式的IP地址转换为更底层的数据格式,一般用于判断IP地址的格式

def validIpAddr(ip):
    try:
        socket.inet_pton(socket.AF_INET, ip)
        return True
    except socket.error:
        return False
```

* IP --> Int / Int --> Ip

```
import socket
import struct

def Ip2Int(ip):
    return struct.unpack("!L",socket.inet_aton(ip))[0]

def Int2Ip(i):
     return socket.inet_ntoa(struct.pack("!L",i))

```



