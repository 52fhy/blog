#### 背景介绍

&emsp;最近在使用ansible做一下自动化的东西, 要构造很多服务器的IP地址, 如果少的话可以手工写, 但是多的话就需要编写脚本了, 可以使用python写一个循环, 这里介绍的是另一种方法, vim的宏的录制.


#### 开始搞

目标样例:

```bash
192.168.1.1
192.168.1.2
192.168.1.3
...

```

> 可以使用这里介绍的方法的前提是前面都一样

```bash
qa
% do something... %
q
```

q用于开始或结束一段宏的录制，a代表触发这段宏的名字。

录制好后，按@a就开始执行do something的部分。这里不用输入冒号, 直接在命令模式输入即可

可以输入第一行`192.168.1.1`后开始录制, 注意光标放在要递增的数字的旁边:

```
qa
Y
p
<C-a>
q

```

录制完以后输入`254@a`就可以了

> 注意这里前面部分都一样, 如果不一样的话就需要使用shell脚本往后面添加了

```
root@localhost# i=100; for x in `cat inventory.txt`; do let i++; echo "$x num=$i" >> inventory.copy;done
```