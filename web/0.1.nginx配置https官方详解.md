#### 什么是`https`?

&emsp;超文本传输安全协议（缩写：HTTPS，英语：Hypertext Transfer Protocol Secure）是超文本传输协议和SSL/TLS的组合，用以提供加密通讯及对网络服务器身份的鉴定。HTTPS连接经常被用于万维网上的交易支付和企业信息系统中敏感信息的传输。HTTP是明文传输的，不安全的。(维基百科)

1. 查看`nginx`对`https`的支持.

`nginx`对`https`的支持是通过`ngx_http_ssl_module`这个模块来实现的，这个模块依赖于系统的`openssl`软件，记得查看系统是否已经安装。

2.下面是翻译`nginx`官网的部分文档

配置一个`https server`必须配置`server`块的监听端口和指定服务端证书和私钥的位置。

```
server {
    listen              443 ssl;
    server_name         www.example.com;
    ssl_certificate     www.example.com.crt;
    ssl_certificate_key www.example.com.key;
}
```
ssl certificate是一个公钥，它被发送给每一个连接这台服务器的客户端，ssl certificate key是一个私钥，他应该被严密存储在服务器上，而且要nginx主程序可读，当然公钥私钥可以放在一个文件中，这种情况下也是只有公钥被发送给客户端。

3. `https server`服务器的优化

`HTTPS`的操作会消耗额外的CPU资源，在多核系统上nginx的worker数目不应低于CPU的核数。最消耗CPU的操作是SSL的握手操作。这里有两个办法去减少每一个客户端的握手操作次数，第一个办法是允许使用长连接(keepalive connection)来通过一个连接发送多个请求，第二个办法是重复利用SSL会话(session)参数，来避免并行和后续的SSL握手连接。SSL sessions被保存在一个多个worker共享的SSL session的缓存中,这一项是通过`ssl_session_cache`来配置的。1M的缓存大约包含有4000个session.默认的缓存超时时间是5分钟，这个可以通过`ssl_session_timeout`这个参数修改。下面是一个样例:

```
worker_processes auto;

http {
    ssl_session_cache   shared:SSL:10m;
    ssl_session_timeout 10m;

    server {
        listen              443 ssl;
        server_name         www.example.com;
        keepalive_timeout   70;

        ssl_certificate     www.example.com.crt;
        ssl_certificate_key www.example.com.key;
        ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers         HIGH:!aNULL:!MD5;
        

```

4. SSL证书链

一些浏览器也许会不接受一个被知名认证机构签名的证书，但另一些浏览器会承认这个证书，。发生这种情况是因为这个认证机构使用了中间证书来签发服务证书，这个中间证书不存在于流行的浏览器中，所以有些浏览器不接受。

