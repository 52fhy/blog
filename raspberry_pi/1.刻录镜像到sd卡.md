####背景说明

&emsp;夏天到了，宿舍温度很高，特别的热，有一天早上醒来突发奇想，能不能把宿舍的温度监控一下，来实时看看宿舍的温度，可以的话，来控制一下空调的开关，想想挺好玩的，于是就入手了一个树莓派，买的是当下最火最高配的树莓派2，同时也买了温度传感器。因为想到自己的平板里面有一个不怎么使用的sd卡，就没有买sd卡，本来以为树莓派跟电脑一样可以从u盘启动，结果查了一下很多资料，说必须有一个sd卡，而且只能从sd卡设置后才可以从u盘启动，想想也是醉了。。。

&emsp;因为使用win平台刻录很方便，ultraiso，win32diskmanager等很多工具，点两下的事儿，我用的是ubuntu系统，居然虚拟机里的win不识别sd卡只识别u盘，丫的。本想把电脑重装回双系统用win的办法，后来想了想玩树莓派不就是为了折腾吗，还是在linux下开搞吧，说搞咱就搞，于是就有了下文，下面是翻译官方的方法，有坑的我会指明。

***

* 首先准备一个sd卡，官方建议至少8G，和一个读卡器。此处有坑，在按照官方刻录之前一定要把sd卡格式化成`FAT32`的格式，不要格式成其它的，开始我天真的认为格式为`ext3/4`，此处还应注意，格式化的是整个磁盘而不是某个分区，去掉最后的数字，比如是`/dev/sda`而不是`/dev/sda1`，sd卡这里有一个坑，它的分区是在最后加上`p1`或者`p2`，而不是单纯的数字，字母数字都应该去掉。命令如下：

 * 查看挂载分区；

   ```
   (pyenv)rocky@homelinux:~/techblog/raspberry_pi$ df -h 
   文件系统        容量  已用  可用 已用% 挂载点
   /dev/sda1       451G   23G  405G    6% /
   none            4.0K     0  4.0K    0% /sys/fs/cgroup
   udev            3.9G  3.1G  777M   81% /dev
   tmpfs           783M  1.3M  782M    1% /run
   none            5.0M     0  5.0M    0% /run/lock
   none            3.9G   16M  3.9G    1% /run/shm
   none            100M   52K  100M    1% /run/user
   /dev/mmcblk0p2   15G  2.4G   12G   18% /media/rocky/13d368bf-6dbf-4751-8ba1-88bed06bef77
   /dev/mmcblk0p1   56M   19M   37M   34% /media/rocky/boot 
   ```

 * 格式化指定sd卡,此处尚有疑问，为什么是`FAT32`呢？

   ```
   mkfs -t vfat /dev/mmcblk0
   ```
* 第二步就是利用linux上的`dd`命令来刻录sd卡，`dd`是一个很有用的linux命令，它可以进行设备之间的‘裸读写’，所谓‘裸读写’就是-不理睬文件系统，直接越过文件系统对物理设备进行读写，所以它可以干很多“拷贝命令”（copy/cp）无法干或不方便干的事情（比如 备份/恢复 硬盘主引导扇区），当然也可以刻录U盘/sd卡。命令： `dd bs=4M if=/home/rocky/2015-05-05-raspbian-wheezy.img of=/dev/mmcblk0` 这里稍微做一下解释：
   
   * bs 同时设置读入/输出的块大小.
   * if 输入的文件，这里指unzip后的镜像文件.
   * of 输出的位置，这里指定整个sd卡。
   * 注意用root权限执行该命令。

* 大概5分钟左右会刻录完成，期间可以用`iotop`查看相关读写速度来判断进度，完成后执行一下`sync`命令同步一下内存文件到磁盘，卸载即可。

* 把sd卡插到树莓派当中，上电，如果绿色灯闪烁及代表成功启动，也可以辅以显示器来判断。至此系统搞定。


