#### 背景介绍

&emsp;来一下科技快一年了, 到公司的这段时间正是公司快速发展的阶段, 也是公司开始大规模使用阿里云VPC的阶段, 很幸运自己参与到了其中, 使用VPC的一个很重要的工作是网段的划分, 不像经典网络的时候每个机器都有一个公网的IP地址, VPC大部分情况下是没有公网IP的, 都只有一个内网的地址, 这里简单总结我在一下科技的网段划分的经验, 不一定是最好的实践经验, 至少能满足我在一下的工作需要.

#### 面临问题

&emsp;公司的服务器主要是采用阿里云的机器, 占比大概是80%, 剩下的是IDC的机器, 做网段划分的一个必不可少的工作是预估公司的公司服务器的数量, 当时的数量大概2000台左右, 于是参考阿里云VPC的实践经验, 我们选择了`192.169.0.0/16`这个大段, 这个大段的主机容量为6万多(192.168.x.0/24 * 254), 足以满足一个除了BAT以外的中型互联网公司的需求, 使用192.168是因为我们对这个网段太熟悉了, 换成其他的也一样的.
![image](https://user-images.githubusercontent.com/7486508/34473367-b4f3a7fc-efac-11e7-9a74-0b4703bbd021.png)



#### 实战划分

&emsp;选择完所使用的大的网段以后, 下一步就是根据不同业务部分的需求来仔细划分, 对应到阿里云的产品就是创建交换机, 比如说有一个部门是做广告的, 预估会使用100多台机器, 这时候你可以给这个组创建一个新的交换机, 按照这个量可以给他们一整个C段, 比如`192.168.0.0/24`, 这个网段的容量是250多台, 应该会满足需求的.
![image](https://user-images.githubusercontent.com/7486508/34473620-0f0760dc-efb0-11e7-89d1-ad14bb08eea7.png)

上面的例子是给的一个整段, 下面再举一个例子, 划分的不是整个C段的, 如果有一个团队他们大概需要70台机器, 这时候给他们250多台的那个网段会显得多余了, 这个时候给他们120多台的网段会比较合适, 如下:

![image](https://user-images.githubusercontent.com/7486508/34473760-a2c3afaa-efb1-11e7-94d2-8a7e73356ddc.png)

![image](https://user-images.githubusercontent.com/7486508/34473787-f963c0e8-efb1-11e7-8871-13bda9f6e611.png)

如上图, 就是划分了两个容量为120多台的网段, 这样就可以给容量小一点的团队使用了, 如果团队的需求比这个还要小, 那么可以在上面的基础上接着划分, 总之会划分的方法就行了.