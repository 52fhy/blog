####什么是`struct` ?

&emsp;Python语言风格比较简洁，在数据类型的定义上也只有六种：字符串(str)，整数(int)，浮点数(float)，元组(tuple)，列表(list)，字典(dict)。通常使用中，我们可以用这六种类型完成大部分工作。但是有时候需要进行与其它语言的交互，或者存取文件，网络传输时，需要对二进制数据进行操作，这时候，可以使用struct模块来完成,它实现字符串字节和Python本地数据类型(如数字和字符串)间的相互转换的函数,Python中没有二进制类型，但是可以使用string字符串类型来存储二进制数据，然后使用struct模块来对二进制数据进行处理。

&emsp;了解c语言的人，一定会知道struct结构体在c语言中的作用，它定义了一种结构，里面包含不同类型的数据(int,char,bool等等)， 方便对某一结构对象进行处理。而在网络通信当中，大多传递的数据是以二进制流（binary data）存在的。当传递字符串时，不必担心太多的问题，而当传递诸如int、char之类的基本数据的时候，就需要有一种机制将某些特定的结构体类型打 包成二进制流的字符串然后再网络传输，而接收端也应该可以通过某种机制进行解包还原出原始的结构体数据。python中的struct模块就提供了这样的 机制，该模块的主要作用就是对python基本类型值与用python字符串格式表示的C struct类型间的转化（This module performs conversions between Python values and C structs represented as Python strings.）。stuct模块提供了很简单的几个函数，下面写几个例子。

####为什么要转换?

&emsp;为了迎合处理字节流，比如 构造网络包来发送，或者解析接收的网络包。 


####`truct`中有3个比较重要的函数.

&emsp;pack函数将普通的数据结构转成字节流，你自然要提供一个 format, 这个 format 描述了你要操作的后面许多value的数据类型，从而按照这个描述生成的有意义的字节流。 而 接收到的字节流 或者 之前生成的字节流，可以通过unpack函数来解析，一大段字节来了，你要解析，自然需要描述一下这个字节流我该在哪里切分一下，应该用什么顺序等，这就是format在做的事情。

1. `struct.pack(format, v1, v2, ...)`,返回一个按照指定格式格式化的字符串.Return a string containing the values v1, v2, ... packed according to the given format. The arguments must match the values required by the format exactly.

 * demo 1:
	```
		>>>import struct
		>>>a = 20
		>>>b = 400
		>>>str = struct.pack('ii',a,b) #转换成字节流,虽然type()看到的还是字符串,其实是二进制字节串,可以直接在网络上传输.
		>>>print len(str)
		>>>8 						   #可以看到长度为8个字节，正好是两个int型数据的长度
		>>>print str
		>>>   #二进制乱码
		>>> print repr(str)
		>>>'\x14\x00\x00\x00\x90\x01\x00\x00'   #其中十六进制的 0x00000014, 0x00001009分别表示20和400,大头在左边使用的`小端序`,不同系统默认使用的不同,可以用命令`sys.byteorder`查看.
	```

```
import struct
import binascii


values = (1, 'ab', 2.7)
s = struct.Struct('I 2s f')
packed_data = s.pack(*values)
data = binascii.hexlify(packed_data) #封装后的值被转换成16进制字节流输出
print 'Original values:', values
print 'Format string  :', s.format
print 'Uses           :', s.size, 'bytes'
print 'Packed Value   :', data
print
packed_data = binascii.unhexlify(data)
s = struct.Struct('I 2s f')
unpacked_data = s.unpack(packed_data)
print 'Unpacked Values:', unpacked_data

```
