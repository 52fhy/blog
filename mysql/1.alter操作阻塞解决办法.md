####事情概要：业务需要，线上mysql数据库要增加一个字段，具体命令：`alter table comb add column sex tinyint(1) DEFAULT '0' COMMENT '******';`,但是执行的时候总是被阻塞挂起，后来从网上查了一下，下面一起做个实验分析一下。

* A session 开启一个事物操作。

```
>begin; //声明事物处理开始。
>use testdatabase;
>select * from sometable;
>  //暂不commit。
```

* B session 执行DDL语句，如alter。

```
>alter table comb add column sex tinyint(1) default '0';
>... //阻塞了。
```

* C session 查看show processlist;
```
mysql> show processlist;
+--------+------+-----------------+-------+---------+------+---------------------------------+---------------------------------------+
| Id     | User | Host            | db    | Command | Time | State                           | Info                                  |
+--------+------+-----------------+-------+---------+------+---------------------------------+---------------------------------------+
| 193715 | qf   | 127.0.0.1:39673 | rocky | Query   |    0 | NULL                            | show processlist                      |
| 194308 | qf   | 127.0.0.1:43821 | rocky | Query   |   12 | Waiting for table metadata lock | alter table nginx add column tst1 int |
+--------+------+-----------------+-------+---------+------+---------------------------------+---------------------------------------+
2 rows in set (0.00 sec)
```
* A session commit 事务后，B session 执行成功。
